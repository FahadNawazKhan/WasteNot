<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WasteNot - Share What You Don't Need</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
        onAuthStateChanged,
        GoogleAuthProvider,
        signInWithPopup,
      } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
      import {
        getStorage,
        ref,
        uploadBytes,
        getDownloadURL,
      } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";
      import {
        getFirestore,
        collection,
        addDoc,
        getDocs,
        query,
        orderBy,
        limit,
      } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

      // Your Firebase configuration
      const firebaseConfig = {
        apiKey: "",
        authDomain: "wastenot-d274c.firebaseapp.com",
        projectId: "wastenot-d274c",
        storageBucket: "wastenot-d274c.firebasestorage.app",
        messagingSenderId: "1068322214232",
        appId: "1:1068322214232:web:8589802d07300e6ae9552d",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const storage = getStorage(app);
      const db = getFirestore(app);
      const googleProvider = new GoogleAuthProvider();

      // Make Firebase services available globally
      window.auth = auth;
      window.storage = storage;
      window.db = db;
      window.firebaseRefs = { ref, uploadBytes, getDownloadURL };
      window.firebaseFirestore = {
        collection,
        addDoc,
        getDocs,
        query,
        orderBy,
        limit,
      };
      window.firebaseAuth = {
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
        onAuthStateChanged,
        GoogleAuthProvider,
        signInWithPopup,
        googleProvider,
      };
    </script>
    <style>
      /* Custom styles that can't be done with Tailwind */
      .gradient-bg {
        background: linear-gradient(135deg, #4ade80 0%, #3b82f6 100%);
      }
      .item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .form-input:focus {
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
      }
      .auth-container {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <!-- Navbar -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <div class="flex-shrink-0 flex items-center">
              <i class="fas fa-recycle text-green-500 text-2xl mr-2"></i>
              <span class="text-xl font-bold text-gray-800">WasteNot</span>
            </div>
          </div>
          <div class="hidden md:ml-6 md:flex md:items-center md:space-x-8">
            <a
              href="#browse"
              class="text-gray-700 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium"
              >Browse</a
            >
            <a
              href="#donate"
              class="text-gray-700 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium"
              >Donate</a
            >
            <button
              onclick="openAuthModal()"
              class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-300"
            >
              Login
            </button>
          </div>
          <div class="-mr-2 flex items-center md:hidden">
            <button
              type="button"
              id="mobile-menu-button"
              class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none"
            >
              <span class="sr-only">Open main menu</span>
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile menu -->
      <div class="hidden md:hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
          <a
            href="#browse"
            class="text-gray-700 hover:text-green-600 block px-3 py-2 rounded-md text-base font-medium"
            >Browse</a
          >
          <a
            href="#donate"
            class="text-gray-700 hover:text-green-600 block px-3 py-2 rounded-md text-base font-medium"
            >Donate</a
          >
          <button
            onclick="openAuthModal()"
            class="bg-green-500 hover:bg-green-600 text-white block w-full text-left px-3 py-2 rounded-md text-base font-medium transition duration-300"
          >
            Login
          </button>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="md:flex md:items-center md:justify-between">
          <div class="md:w-1/2 mb-10 md:mb-0">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">
              Give What You Don't Need
            </h1>
            <p class="text-xl mb-8">
              Join our community to reduce waste and help those in need by
              sharing items you no longer use.
            </p>
            <div class="flex space-x-4">
              <a
                href="#browse"
                class="bg-white text-green-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-semibold transition duration-300"
                >Browse Items</a
              >
              <a
                href="#donate"
                class="border-2 border-white text-white hover:bg-white hover:text-green-600 px-6 py-3 rounded-lg font-semibold transition duration-300"
                >Donate Now</a
              >
            </div>
          </div>
          <div class="md:w-1/2 flex justify-center">
            <img
              src="https://images.unsplash.com/photo-1600585152220-90363fe7e115?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
              alt="People sharing items"
              class="rounded-lg shadow-2xl max-w-md w-full h-auto"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Browse Section -->
    <section id="browse" class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-800 mb-4">
            Browse Available Items
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto">
            Find items that others are giving away for free. Give them a new
            home instead of letting them go to waste.
          </p>
        </div>

        <!-- Filter Controls -->
        <div
          class="mb-8 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"
        >
          <div class="relative w-full md:w-64">
            <input
              type="text"
              placeholder="Search items..."
              class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            />
            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
          </div>
          <div class="flex space-x-2 w-full md:w-auto">
            <select
              class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"
            >
              <option value="">All Categories</option>
              <option value="clothing">Clothing</option>
              <option value="furniture">Furniture</option>
              <option value="electronics">Electronics</option>
              <option value="books">Books</option>
              <option value="toys">Toys</option>
              <option value="other">Other</option>
            </select>
            <select
              class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"
            >
              <option value="">All Conditions</option>
              <option value="new">New</option>
              <option value="used">Used</option>
              <option value="slightly-used">Slightly Used</option>
            </select>
          </div>
        </div>

        <!-- Add this inside the Browse Section, above the items grid -->
        <div class="mb-6 text-center">
          <button
            id="nearby-btn"
            class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition duration-300"
          >
            Show Nearby Items
          </button>
          <span id="location-status" class="ml-4 text-gray-500 text-sm"></span>
        </div>

        <!-- Items Grid -->
        <div
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"
          id="items-grid"
        >
          <!-- Items will be loaded here via JavaScript -->
        </div>

        <div class="mt-12 text-center">
          <button
            class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition duration-300"
          >
            Load More Items
          </button>
        </div>
      </div>
    </section>

    <!-- Donate Section -->
    <section id="donate" class="py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="md:flex md:items-center md:space-x-12">
          <div class="md:w-1/2 mb-10 md:mb-0">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">
              Donate Your Unused Items
            </h2>
            <p class="text-gray-600 mb-6">
              Instead of throwing away items you no longer need, give them a
              second life by donating to someone who can use them.
            </p>
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
              <div class="flex items-start mb-4">
                <div class="bg-green-100 p-3 rounded-full mr-4">
                  <i class="fas fa-lightbulb text-green-600"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-800">
                    What can you donate?
                  </h4>
                  <p class="text-gray-600 text-sm">
                    Clothing, furniture, electronics, books, toys, kitchenware,
                    and more!
                  </p>
                </div>
              </div>
              <div class="flex items-start">
                <div class="bg-blue-100 p-3 rounded-full mr-4">
                  <i class="fas fa-check-circle text-blue-600"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-gray-800">
                    Donation Guidelines
                  </h4>
                  <p class="text-gray-600 text-sm">
                    Please ensure items are clean and in usable condition.
                    Broken or damaged items may not be accepted.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="md:w-1/2">
            <div class="bg-white p-8 rounded-xl shadow-lg">
              <h3 class="text-2xl font-bold text-gray-800 mb-6">
                Donation Form
              </h3>
              <form id="donation-form">
                <div class="mb-6">
                  <label
                    for="item-photo"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Item Photo</label
                  >
                  <div
                    class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"
                  >
                    <div class="space-y-1 text-center">
                      <div class="flex text-sm text-gray-600">
                        <label
                          for="file-upload"
                          class="relative cursor-pointer bg-white rounded-md font-medium text-green-600 hover:text-green-500 focus-within:outline-none"
                        >
                          <span>Upload a file</span>
                          <input
                            id="file-upload"
                            name="file-upload"
                            type="file"
                            class="sr-only"
                          />
                        </label>
                        <p class="pl-1">or drag and drop</p>
                      </div>
                      <p class="text-xs text-gray-500">PNG, JPG up to 5MB</p>
                    </div>
                  </div>
                </div>

                <div class="mb-6">
                  <label
                    for="item-title"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Item Title</label
                  >
                  <input
                    type="text"
                    id="item-title"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="e.g. Wooden Dining Table"
                  />
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                  <div>
                    <label
                      for="item-category"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >Category</label
                    >
                    <select
                      id="item-category"
                      class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select a category</option>
                      <option value="clothing">Clothing</option>
                      <option value="furniture">Furniture</option>
                      <option value="electronics">Electronics</option>
                      <option value="books">Books</option>
                      <option value="toys">Toys</option>
                      <option value="kitchenware">Kitchenware</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="item-condition"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >Condition</label
                    >
                    <select
                      id="item-condition"
                      class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select condition</option>
                      <option value="new">New</option>
                      <option value="used">Used</option>
                      <option value="slightly-used">Slightly Used</option>
                    </select>
                  </div>
                </div>

                <div class="mb-6">
                  <label
                    for="item-description"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Description</label
                  >
                  <textarea
                    id="item-description"
                    rows="4"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="Provide details about the item..."
                  ></textarea>
                </div>

                <div class="mb-6">
                  <label
                    for="item-location"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Location (Optional)</label
                  >
                  <input
                    type="text"
                    id="item-location"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="City or neighborhood"
                  />
                </div>

                <button
                  type="submit"
                  class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-semibold transition duration-300"
                >
                  Submit Donation
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-800 mb-4">
            How WasteNot Works
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto">
            A simple process to give and receive items, reducing waste and
            helping others.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div
            class="text-center p-6 rounded-lg hover:bg-gray-50 transition duration-300"
          >
            <div
              class="bg-green-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4"
            >
              <i class="fas fa-upload text-green-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">
              1. List Your Item
            </h3>
            <p class="text-gray-600">
              Upload details and photos of items you no longer need but are
              still in good condition.
            </p>
          </div>

          <div
            class="text-center p-6 rounded-lg hover:bg-gray-50 transition duration-300"
          >
            <div
              class="bg-blue-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4"
            >
              <i class="fas fa-search text-blue-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">
              2. Someone Finds It
            </h3>
            <p class="text-gray-600">
              People in your community browse available items and request what
              they need.
            </p>
          </div>

          <div
            class="text-center p-6 rounded-lg hover:bg-gray-50 transition duration-300"
          >
            <div
              class="bg-purple-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4"
            >
              <i class="fas fa-hands-helping text-purple-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">
              3. Arrange Pickup
            </h3>
            <p class="text-gray-600">
              Coordinate a time and place to hand off the item, or have it
              picked up.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-800 mb-4">
            What People Are Saying
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto">
            Hear from our community members about their experiences.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <div class="flex items-center mb-4">
              <div class="w-12 h-12 rounded-full overflow-hidden mr-4">
                <img
                  src="https://randomuser.me/api/portraits/women/43.jpg"
                  alt="Sarah J."
                  class="w-full h-full object-cover"
                />
              </div>
              <div>
                <h4 class="font-semibold text-gray-800">Sarah J.</h4>
                <div class="flex text-yellow-400">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                </div>
              </div>
            </div>
            <p class="text-gray-600">
              "I was able to furnish my entire apartment with items from
              WasteNot. The community is amazing and I've saved thousands!"
            </p>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <div class="flex items-center mb-4">
              <div class="w-12 h-12 rounded-full overflow-hidden mr-4">
                <img
                  src="https://randomuser.me/api/portraits/men/32.jpg"
                  alt="Michael T."
                  class="w-full h-full object-cover"
                />
              </div>
              <div>
                <h4 class="font-semibold text-gray-800">Michael T.</h4>
                <div class="flex text-yellow-400">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                </div>
              </div>
            </div>
            <p class="text-gray-600">
              "Instead of throwing away my old electronics, I donated them
              through WasteNot. They went to a student who couldn't afford a
              laptop. Feels great!"
            </p>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <div class="flex items-center mb-4">
              <div class="w-12 h-12 rounded-full overflow-hidden mr-4">
                <img
                  src="https://randomuser.me/api/portraits/women/65.jpg"
                  alt="Priya K."
                  class="w-full h-full object-cover"
                />
              </div>
              <div>
                <h4 class="font-semibold text-gray-800">Priya K.</h4>
                <div class="flex text-yellow-400">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star-half-alt"></i>
                </div>
              </div>
            </div>
            <p class="text-gray-600">
              "As a single mom, WasteNot has been a lifesaver. I've gotten
              clothes for my kids, books, and even a stroller. The process is so
              simple."
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="gradient-bg text-white py-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold mb-6">Ready to Make a Difference?</h2>
        <p class="text-xl mb-8 max-w-3xl mx-auto">
          Join thousands of people who are reducing waste and helping others by
          sharing what they don't need.
        </p>
        <div
          class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4"
        >
          <a
            href="#donate"
            class="bg-white text-green-600 hover:bg-gray-100 px-8 py-4 rounded-lg font-semibold text-lg transition duration-300"
            >Start Donating</a
          >
          <a
            href="#browse"
            class="border-2 border-white text-white hover:bg-white hover:text-green-600 px-8 py-4 rounded-lg font-semibold text-lg transition duration-300"
            >Browse Items</a
          >
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <div class="flex items-center mb-4">
              <i class="fas fa-recycle text-green-400 text-2xl mr-2"></i>
              <span class="text-xl font-bold">WasteNot</span>
            </div>
            <p class="text-gray-400">
              Reducing waste by connecting people who have items to give with
              those who need them.
            </p>
            <div class="flex space-x-4 mt-4">
              <a href="#" class="text-gray-400 hover:text-white"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="text-gray-400 hover:text-white"
                ><i class="fab fa-twitter"></i
              ></a>
              <a href="#" class="text-gray-400 hover:text-white"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="#" class="text-gray-400 hover:text-white"
                ><i class="fab fa-linkedin-in"></i
              ></a>
            </div>
          </div>

          <div>
            <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
            <ul class="space-y-2">
              <li>
                <a href="#browse" class="text-gray-400 hover:text-white"
                  >Browse Items</a
                >
              </li>
              <li>
                <a href="#donate" class="text-gray-400 hover:text-white"
                  >Donate Items</a
                >
              </li>
              <li>
                <a href="#" class="text-gray-400 hover:text-white"
                  >How It Works</a
                >
              </li>
              <li>
                <a href="#" class="text-gray-400 hover:text-white"
                  >Success Stories</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-lg font-semibold mb-4">Categories</h3>
            <ul class="space-y-2">
              <li>
                <a href="#" class="text-gray-400 hover:text-white">Clothing</a>
              </li>
              <li>
                <a href="#" class="text-gray-400 hover:text-white">Furniture</a>
              </li>
              <li>
                <a href="#" class="text-gray-400 hover:text-white"
                  >Electronics</a
                >
              </li>
              <li>
                <a href="#" class="text-gray-400 hover:text-white">Books</a>
              </li>
              <li>
                <a href="#" class="text-gray-400 hover:text-white">Toys</a>
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-lg font-semibold mb-4">Contact</h3>
            <ul class="space-y-2 text-gray-400">
              <li class="flex items-start">
                <i class="fas fa-envelope mt-1 mr-2 text-green-400"></i>
                <span>hello@wastenot.com</span>
              </li>
              <li class="flex items-start">
                <i class="fas fa-phone-alt mt-1 mr-2 text-green-400"></i>
                <span>+1 (555) 123-4567</span>
              </li>
              <li class="flex items-start">
                <i class="fas fa-map-marker-alt mt-1 mr-2 text-green-400"></i>
                <span>123 Green St, Eco City, EC 12345</span>
              </li>
            </ul>
          </div>
        </div>

        <div
          class="border-t border-gray-700 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center"
        >
          <p class="text-gray-400 text-sm mb-4 md:mb-0">
            © 2023 WasteNot. All rights reserved.
          </p>
          <div class="flex space-x-6">
            <a href="#" class="text-gray-400 hover:text-white text-sm"
              >Privacy Policy</a
            >
            <a href="#" class="text-gray-400 hover:text-white text-sm"
              >Terms of Service</a
            >
            <a href="#" class="text-gray-400 hover:text-white text-sm"
              >Cookie Policy</a
            >
          </div>
        </div>
      </div>
    </footer>

    <!-- Auth Modal -->
    <div
      id="auth-modal"
      class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 bg-black bg-opacity-50"
    >
      <div class="auth-container w-full max-w-md rounded-xl overflow-hidden">
        <div class="relative">
          <button
            onclick="closeAuthModal()"
            class="absolute top-4 right-4 text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times"></i>
          </button>
          <div class="p-8">
            <!-- Login Form -->
            <div id="login-form-container">
              <div class="text-center mb-8">
                <h3 class="text-2xl font-bold text-gray-800">Welcome Back</h3>
                <p class="text-gray-600">Login to your account or sign up</p>
              </div>
              <form id="login-form" class="mb-6">
                <div class="mb-4">
                  <label
                    for="email"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Email</label
                  >
                  <input
                    type="email"
                    id="email"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="your@email.com"
                  />
                </div>

                <div class="mb-6">
                  <label
                    for="password"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Password</label
                  >
                  <input
                    type="password"
                    id="password"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="••••••••"
                  />
                </div>

                <button
                  type="submit"
                  class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-semibold transition duration-300"
                >
                  Login
                </button>
              </form>

              <div class="flex items-center mb-6">
                <div class="flex-1 border-t border-gray-300"></div>
                <span class="px-4 text-gray-500">or</span>
                <div class="flex-1 border-t border-gray-300"></div>
              </div>

              <div class="grid grid-cols-2 gap-4 mb-6">
                <button
                  class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300"
                >
                  <i class="fab fa-google text-red-500 mr-2"></i>
                  <span>Google</span>
                </button>
                <button
                  class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300"
                >
                  <i class="fab fa-facebook-f text-blue-600 mr-2"></i>
                  <span>Facebook</span>
                </button>
              </div>

              <div class="text-center">
                <p class="text-gray-600">
                  Don't have an account?
                  <button
                    onclick="switchToSignup()"
                    class="text-green-500 hover:text-green-600 font-medium"
                  >
                    Sign up
                  </button>
                </p>
              </div>
            </div>
            <!-- Signup Form -->
            <div id="signup-form-container" class="hidden">
              <div class="text-center mb-8">
                <h3 class="text-2xl font-bold text-gray-800">
                  Create an Account
                </h3>
                <p class="text-gray-600">Join our community today</p>
              </div>

              <form id="register-form" class="mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                  <div>
                    <label
                      for="first-name"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >First Name</label
                    >
                    <input
                      type="text"
                      id="first-name"
                      class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="John"
                    />
                  </div>
                  <div>
                    <label
                      for="last-name"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >Last Name</label
                    >
                    <input
                      type="text"
                      id="last-name"
                      class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Doe"
                    />
                  </div>
                </div>

                <div class="mb-4">
                  <label
                    for="signup-email"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Email</label
                  >
                  <input
                    type="email"
                    id="signup-email"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="your@email.com"
                  />
                </div>

                <div class="mb-4">
                  <label
                    for="signup-password"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Password</label
                  >
                  <input
                    type="password"
                    id="signup-password"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="••••••••"
                  />
                </div>

                <div class="mb-6">
                  <label
                    for="confirm-password"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Confirm Password</label
                  >
                  <input
                    type="password"
                    id="confirm-password"
                    class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="••••••••"
                  />
                </div>

                <button
                  type="submit"
                  class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-semibold transition duration-300"
                >
                  Sign Up
                </button>
              </form>

              <div class="text-center">
                <p class="text-gray-600">
                  Already have an account?
                  <button
                    onclick="switchToLogin()"
                    class="text-green-500 hover:text-green-600 font-medium"
                  >
                    Login
                  </button>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Sample data for items
      const sampleItems = [
        {
          id: 1,
          title: "Wooden Dining Table",
          description:
            "Solid oak table, slightly used but in great condition. Seats 6 people comfortably.",
          category: "Furniture",
          condition: "Slightly Used",
          image:
            "https://images.unsplash.com/photo-1567538096630-e0c55bd6374c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80",
          location: "Eco City",
          lat: 40.7128,
          lng: -74.006,
        },
        {
          id: 2,
          title: "Winter Jacket (Size M)",
          description:
            "North Face winter jacket, excellent condition. Only worn a few times.",
          category: "Clothing",
          condition: "Slightly Used",
          image:
            "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=736&q=80",
          location: "Green Town",
          lat: 40.7306,
          lng: -73.9352,
        },
        {
          id: 3,
          title: "Harry Potter Book Set",
          description:
            "Complete 7-book collection in good condition. Some wear on covers.",
          category: "Books",
          condition: "Used",
          image:
            "https://images.unsplash.com/photo-1626618012641-bfbca5a31239?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=764&q=80",
        },
        {
          id: 4,
          title: "Blender",
          description:
            "Brand new in box, never opened. Received as a gift but already have one.",
          category: "Electronics",
          condition: "New",
          image:
            "https://images.unsplash.com/photo-1594035910387-fea47794261f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=880&q=80",
        },
        {
          id: 5,
          title: "Children's Bicycle",
          description:
            "20-inch bike with training wheels. Some scratches but works perfectly.",
          category: "Toys",
          condition: "Used",
          image:
            "https://images.unsplash.com/photo-1532298229144-0ec0c57515c7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1022&q=80",
        },
        {
          id: 6,
          title: "Coffee Table",
          description:
            "Modern glass top coffee table with metal legs. Excellent condition.",
          category: "Furniture",
          condition: "Slightly Used",
          image:
            "https://images.unsplash.com/photo-1555041463-a4035450da4d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=764&q=80",
        },
      ];

      // DOM elements
      const mobileMenuButton = document.getElementById("mobile-menu-button");
      const mobileMenu = document.getElementById("mobile-menu");
      const authModal = document.getElementById("auth-modal");
      const loginForm = document.getElementById("login-form");
      const signupForm = document.getElementById("signup-form");
      const registerForm = document.getElementById("register-form");
      const donationForm = document.getElementById("donation-form");
      const itemsGrid = document.getElementById("items-grid");
      const nearbyBtn = document.getElementById("nearby-btn");
      const locationStatus = document.getElementById("location-status");
      const searchInput = document.querySelector(
        'input[placeholder="Search items..."]'
      );
      const fileInput = document.getElementById("file-upload");
      const imagePreview = document.getElementById("image-preview");

      // Mobile menu toggle
      mobileMenuButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });

      // Open auth modal
      function openAuthModal() {
        authModal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      }

      // Close auth modal
      function closeAuthModal() {
        authModal.classList.add("hidden");
        document.body.style.overflow = "auto";
      }

      // Switch to signup form
      function switchToSignup() {
        document.getElementById("login-form-container").classList.add("hidden");
        document
          .getElementById("signup-form-container")
          .classList.remove("hidden");
      }

      // Switch to login form
      function switchToLogin() {
        document
          .getElementById("signup-form-container")
          .classList.add("hidden");
        document
          .getElementById("login-form-container")
          .classList.remove("hidden");
      }

      // Distance calculation function
      function getDistance(lat1, lng1, lat2, lng2) {
        function toRad(x) {
          return (x * Math.PI) / 180;
        }
        const R = 6371; // km
        const dLat = toRad(lat2 - lat1);
        const dLng = toRad(lng2 - lng1);
        const a =
          Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos(toRad(lat1)) *
            Math.cos(toRad(lat2)) *
            Math.sin(dLng / 2) *
            Math.sin(dLng / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        return R * c;
      }

      // Load sample items
      function loadItems(items = sampleItems, userLat = null, userLng = null) {
        itemsGrid.innerHTML = "";
        items.forEach((item) => {
          let distanceInfo = "";
          if (userLat && userLng && item.lat && item.lng) {
            const dist = getDistance(userLat, userLng, item.lat, item.lng);
            distanceInfo = `<span class="text-xs text-blue-600 ml-2">(${dist.toFixed(
              2
            )} km away)</span>`;
          }
          const itemCard = document.createElement("div");
          itemCard.className =
            "item-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300";
          itemCard.innerHTML = `
      <div class="h-48 overflow-hidden">
        <img src="${item.image}" alt="${
            item.title
          }" class="w-full h-full object-cover">
      </div>
      <div class="p-4">
        <div class="flex justify-between items-start mb-2">
          <h3 class="font-bold text-lg text-gray-800">${item.title}</h3>
          <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">${
            item.condition
          }</span>
        </div>
        <p class="text-gray-600 text-sm mb-3">${item.description}</p>
        <div class="flex justify-between items-center">
          <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">${
            item.category
          }</span>
          <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">${
            item.location || ""
          }${distanceInfo}</span>
        </div>
        <button class="mt-4 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300">Request Item</button>
      </div>
    `;
          itemsGrid.appendChild(itemCard);
        });
      }

      // Mobile nearby items button
      nearbyBtn.addEventListener("click", () => {
        locationStatus.textContent = "Getting your location...";
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (pos) => {
              const userLat = pos.coords.latitude;
              const userLng = pos.coords.longitude;
              locationStatus.textContent = "Showing items near you!";
              // Sort items by distance
              const sortedItems = [...sampleItems].sort((a, b) => {
                const distA = getDistance(userLat, userLng, a.lat, a.lng);
                const distB = getDistance(userLat, userLng, b.lat, b.lng);
                return distA - distB;
              });
              loadItems(sortedItems, userLat, userLng);
            },
            (err) => {
              locationStatus.textContent = "Location access denied.";
            }
          );
        } else {
          locationStatus.textContent = "Geolocation not supported.";
        }
      });

      // Search functionality
      searchInput.addEventListener("input", function () {
        const query = this.value.trim().toLowerCase();
        const filtered = sampleItems.filter(
          (item) =>
            item.title.toLowerCase().includes(query) ||
            item.description.toLowerCase().includes(query) ||
            (item.category && item.category.toLowerCase().includes(query)) ||
            (item.location && item.location.toLowerCase().includes(query))
        );
        loadItems(filtered);
      });

      // Form submission handlers
      loginForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        try {
          await window.firebaseAuth.signInWithEmailAndPassword(
            window.auth,
            email,
            password
          );
          alert("Logged in successfully!");
          closeAuthModal();
        } catch (error) {
          if (
            error.code === "auth/invalid-login-credentials" ||
            error.code === "auth/user-not-found"
          ) {
            alert("Invalid email or password. Please try again or sign up.");
          } else {
            alert(error.message);
          }
        }
      });

      registerForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const email = document.getElementById("signup-email").value;
        const password = document.getElementById("signup-password").value;
        try {
          await window.firebaseAuth.createUserWithEmailAndPassword(
            window.auth,
            email,
            password
          );
          alert("Account created successfully! You can now login.");
          switchToLogin();
        } catch (error) {
          alert(error.message);
        }
      });

      donationForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const fileInput = document.getElementById("file-upload");
        const file = fileInput.files[0];
        const title = document.getElementById("item-title").value;
        const category = document.getElementById("item-category").value;
        const condition = document.getElementById("item-condition").value;
        const description = document.getElementById("item-description").value;

        if (!title || !category || !condition || !description) {
          alert("Please fill in all required fields.");
          return;
        }

        let photoURL = "";
        if (file) {
          const storageRef = window.firebaseRefs.ref(
            window.storage,
            "item-photos/" + Date.now() + "_" + file.name
          );
          await window.firebaseRefs.uploadBytes(storageRef, file);
          photoURL = await window.firebaseRefs.getDownloadURL(storageRef);
        }

        const location = document.getElementById("item-location").value;
        let lat = null,
          lng = null;
        if (window.lastGeoLocation) {
          lat = window.lastGeoLocation.latitude;
          lng = window.lastGeoLocation.longitude;
        }

        await window.firebaseFirestore.addDoc(
          window.firebaseFirestore.collection(window.db, "items"),
          {
            title,
            description,
            category,
            condition,
            image: photoURL,
            location,
            lat,
            lng,
            createdAt: Date.now(),
          }
        );

        alert("Thank you for donating! Your item is now listed.");
        donationForm.reset();
        imagePreview.innerHTML = "";
        fetchAndShowItems();
      });

      fileInput.addEventListener("change", function () {
        imagePreview.innerHTML = "";
        const file = fileInput.files[0];
        if (file && file.type.startsWith("image/")) {
          const reader = new FileReader();
          reader.onload = function (e) {
            imagePreview.innerHTML = `
        <img src="${e.target.result}" alt="Preview" class="mx-auto rounded-lg shadow-md max-h-48" />
      `;
          };
          reader.readAsDataURL(file);
        }
      });

      // Initialize the page
      document.addEventListener("DOMContentLoaded", () => {
        loadItems();

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute("href")).scrollIntoView({
              behavior: "smooth",
            });
          });
        });
      });
    </script>
  </body>
</html>

